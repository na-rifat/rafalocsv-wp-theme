jQuery(function(t){function e(e){var n={action:"add_gift_card_amount",amount:t("#gift_card-amount").val(),product_id:t("#post_ID").val()},a=e.closest("span.add-new-amount-section");a.block({message:null,overlayCSS:{background:"#fff url("+ywgc_data.loader+") no-repeat center",opacity:.6}}),t.post(ywgc_data.ajax_url,n,function(e){1==e.code&&t("span.variation-amount-list").replaceWith(e.value),t("#gift_card-amount").val(""),t("#gift_card-amount").selectionStart=0,t("#gift_card-amount").selectionEnd=0,t("#gift_card-amount").focus(),a.unblock()})}t(document).on("click","a.remove-amount",function(e){e.preventDefault();var n={action:"remove_gift_card_amount",amount:t(this).closest("span.variation-amount").find('input[name="gift-card-amounts[]"]').val(),product_id:t("#post_ID").val()},a=t(this).closest("span.variation-amount");a.block({message:null,overlayCSS:{background:"#fff url("+ywgc_data.loader+") no-repeat center",opacity:.6}}),t.post(ywgc_data.ajax_url,n,function(t){1==t.code&&a.remove(),a.unblock()})}),t(document).on("click","a.add-new-amount",function(n){n.preventDefault(),e(t(this))}),t(document).on("keypress","input#gift_card-amount",function(n){13===event.which&&(n.preventDefault(),t(this).attr("disabled","disabled"),e(t(this)),t(this).removeAttr("disabled"))}),t(document).on("change",'input[name="ywgc_physical_gift_card"]',function(e){var n=t(this).prop("checked");t('input[name="_virtual"]').prop("checked",!n)}),t(document).on("click",".image-gallery-reset",function(e){e.preventDefault(),t("#ywgc-card-header-image img").remove(),t("#ywgc_product_image_id").val(0)}),t("body .ywgc_order_sold_as_gift_card").each(function(){t(this).parent("td").find(".wc-order-item-name").hide()}),t("._manage_stock_field").addClass("show_if_gift-card").show(),void 0!==jQuery.fn.datepicker&&t(".ywgc-expiration-date-picker").datepicker({dateFormat:ywgc_data.date_format,minDate:1,maxDate:"+1Y"});var n=t("button.ywgc-actions:first").text();t(document).on("click","button.ywgc-actions",function(e){e.preventDefault(),console.log("click");var a=t(this),o=a.prev("#ywgc_direct_link").text(),i=t("<input>");t("body").append(i),i.val(o).select(),document.execCommand("copy"),i.remove();var c=t("#ywgc_copied_to_clipboard").text();a.text(c),setTimeout(function(){a.text(n)},1e3)}),t(document).on("change",".ywgc-toggle-enabled input",function(){var e="yes"===t(this).val()?"yes":"no",n=t(this).closest(".ywgc-toggle-enabled"),a=n.data("gift-card-id");n.block({message:null,overlayCSS:{background:"#fff",opacity:.7},ignoreIfBlocked:!0}),t.ajax({type:"POST",data:{action:"ywgc_toggle_enabled_action",id:a,enabled:e},url:ajaxurl,success:function(t){void 0!==t.error&&alert(t.error)},complete:function(){n.unblock()}})}),"yes"===t(".ywgc-override-product-settings input").val()&&(t(".ywgc-custom-amount-field").removeClass("ywgc-hidden"),t(".minimal-amount-field").removeClass("ywgc-hidden")),t(document).on("change",".ywgc-override-product-settings input",function(){t(this).val();t(".ywgc-custom-amount-field").toggle(),"yes"===t(".ywgc-custom-amount-field input").val()&&t(".minimal-amount-field").toggle()}),"yes"===t(".ywgc-custom-amount-field input").val()&&"yes"==t(".ywgc-override-product-settings input").val()?t(".minimal-amount-field").removeClass("ywgc-hidden"):t(".minimal-amount-field").addClass("ywgc-hidden"),t(document).on("change",".ywgc-custom-amount-field input",function(){t(this).val();t(".minimal-amount-field").toggle()}),"yes"===t(".ywgc-add-discount-settings input").val()&&t(".ywgc-add-discount-settings-container").removeClass("ywgc-hidden"),t(document).on("change",".ywgc-add-discount-settings input",function(){t(this).val();t(".ywgc-add-discount-settings-container").toggle()}),"yes"===t(".ywgc-expiration-settings input").val()&&t(".ywgc-expiration-settings-container").removeClass("ywgc-hidden"),t(document).on("change",".ywgc-expiration-settings input",function(){t(this).val();t(".ywgc-expiration-settings-container").toggle()}),t(document).on("mouseover","table tr.type-gift_card",function(e){t(this).css("background-color","#f1f6f8"),t(this).find("td.gift_card_actions .ywgc-actions").show()}),t(document).on("mouseout","table tr.type-gift_card",function(e){t(this).removeAttr("style"),t(this).find("td.gift_card_actions .ywgc-actions").hide()})});
