!function(l){var m;function r(){"use strict";l(".wc-shipping-zone-rows").sortable({items:"tr",cursor:"move",axis:"y",handle:"td.wc-shipping-zone-sort",scrollSensitivity:40}),l(".wc-shipping-zone-region-select:not(.enhanced)").select2(),l(".wc-shipping-zone-region-select:not(.enhanced)").addClass("enhanced");l(".tips, .help_tip, .woocommerce-help-tip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200})}"undefined"!=typeof yith_wpv_shipping_general&&(m={},m={message:null,overlayCSS:{background:"#fff",opacity:.6}},l(document).on("click","#yith-wcmv-btn-add",function(e){"use strict";e.preventDefault()}),l(document).on("click",".yith-wpdv-wc-shipping-zone-postcodes-toggle",function(e){"use strict";e.preventDefault(),l(this).closest("tr").find(".wc-shipping-zone-postcodes").show(),l(this).hide()}),l(document).on("click",".yith-wpdv-wc-shipping-zone-delete",function(e){"use strict";e.preventDefault(),l(this).closest("tr").remove()}),l("#yith-wpv-shipping-metohd-btn-add").click(function(e){"use strict";e.preventDefault();var t=l(document).find("table.wc-shipping-zones"),i=t.children("tbody");t.block(m);l.post(yith_wpv_shipping_general.ajax_url,{action:"yith_wpv_shipping_add_new_option"},function(e){i.append(e),i.closest("form").find('select[name="type"]').change(),r(),t.unblock()})}),r(),l(document.body).on("click",".yith-wpv-shipping-methods-add",function(e){"use strict";e.preventDefault();e=l(this).data("key");l(this).WCBackboneModal({template:"wc-modal-add-shipping-method",variable:{yith_wpd_area_key:e}})}),l(document.body).on("wc_backbone_modal_loaded",function(e,t,i){"use strict";void 0!==l("#yith-wpv-shipping-method-dropdown")&&l("#yith-wpv-shipping-method-dropdown").change();var o,p,n,h,a,c,d,s,_=l(".wc-backbone-modal-edit-shipping-mode");0<_.length&&(o=_.find('input[name="yith_wpd_shipping_type"]').val(),p=_.find('input[name="yith_wpd_shipping_key"]').val(),a=l("#method_title_"+p),c=l("#method_tax_status_"+p),d=l("#method_cost_"+p),s=l("#method_requires_"+p),n=l("#min_amount_"+p),0<(h=_.find('input[name="woocommerce_'+o+'_title"]')).length&&h.val(a.val()),0<(a=_.find('select[name="woocommerce_'+o+'_tax_status"]')).length&&a.val(c.val()),0<(c=_.find('input[name="woocommerce_'+o+'_cost"]')).length&&c.val(d.val()),0<(d=_.find('select[name="woocommerce_free_shipping_requires"]')).length&&d.val(s.val()).change(),0<(s=_.find('input[name="woocommerce_free_shipping_min_amount"]')).length&&s.val(n.val()),l(".yith-wpv-shipping-method-form-container_"+p+" input.wc-shipping-zone-method-hidden-data").each(function(e){var t,i=l(this).attr("id"),n=i.replace("_"+p,"");n.match("^method_")||n.match("^woocommerce_")||n.match("^yith_wpd_")||"min_amount"===n||"type_id"===n||"class_costs"===n||"requires"===n||(t=_.find("#woocommerce_"+o+"_"+n),i=l("#"+i).val(),0<t.length&&t.val(i)),"class_costs"===n&&_.find("#woocommerce_"+o+"_"+n).next("p").remove()}),r())}),l(document.body).on("wc_backbone_modal_response",function(e,t,n){"use strict";if("undefined"!=typeof n.yith_wpd_area_key&&null!=n.yith_wpd_area_key&&""!=n.yith_wpd_area_key){var i=l(".yith-wpdv-wc-shipping-zone-methods-list_"+n.yith_wpd_area_key),o=i.find("li:not(.wc-shipping-zone-method-noshipping).wc-shipping-zone-method"),p=i.find(".wc-shipping-zone-method-hidden-data");i.find(".wc-shipping-zone-methods-add-row");i.block(m);t={action:"yith_wpv_shipping_add_new_shipping_method",data:n};l.post(yith_wpv_shipping_general.ajax_url,t,function(e){i.append(e),i.append(o),i.append(p),i.find(".wc-shipping-zone-method-noshipping").remove(),r(),i.unblock()})}else if(typeof n.yith_wpd_parent_key&&""!=n.yith_wpd_shipping_key&&""!=n.yith_wpd_shipping_type)if(0<l(".wc-backbone-modal-edit-shipping-mode").length){var h=l("#method_title_"+n.yith_wpd_shipping_key),a=l("#method_tax_status_"+n.yith_wpd_shipping_key),c=l("#method_cost_"+n.yith_wpd_shipping_key),d=l("#method_requires_"+n.yith_wpd_shipping_key),s=l("#min_amount_"+n.yith_wpd_shipping_key);switch(n.yith_wpd_shipping_type){case"flat_rate":0<h.length&&h.val(n.woocommerce_flat_rate_title),0<a.length&&a.val(n.woocommerce_flat_rate_tax_status),0<c.length&&c.val(n.woocommerce_flat_rate_cost);var _="yith_vendor_data[zone_data]["+n.yith_wpd_parent_key+"][zone_shipping_methods]["+n.yith_wpd_shipping_key+"][";l.each(n,function(e,t){var i=e.replace(_,"").replace("]","");i.match("^method_")||i.match("^woocommerce_")||i.match("^yith_wpd_")||"min_amount"===i||"type_id"===i||(e=null,(e=l("#"+i+"_"+n.yith_wpd_shipping_key))&&(i="woocommerce_"+n.yith_wpd_shipping_type+"_"+i,e.val(n[i])))});break;case"local_pickup":0<h.length&&h.val(n.woocommerce_local_pickup_title),0<a.length&&a.val(n.woocommerce_local_pickup_tax_status),0<c.length&&c.val(n.woocommerce_local_pickup_cost);break;case"free_shipping":0<h.length&&h.val(n.woocommerce_free_shipping_title),0<d.length&&d.val(n.woocommerce_free_shipping_requires),0<s.length&&s.val(n.woocommerce_free_shipping_min_amount),0<a.length&&a.val(""),0<c.length&&c.val("")}}}),l(document.body).on("change","#yith-wpv-shipping-method-dropdown",function(){var e=l(this).find("option:selected").data("description");l(this).parent().find(".wc-shipping-zone-method-description").remove(),l(this).after('<p class="wc-shipping-zone-method-description">'+e+"</p>"),l(this).closest("article").height(l(this).parent().height())}),l(document.body).on("click","ul.yith-wpdv-wc-shipping-zone-methods-list li.wc-shipping-zone-method a.method_enabled",function(e){"use strict";e.preventDefault();var t=l(this).data("parent-key"),i=l(this).data("shipping-key"),n=l(this).data("shipping-type"),o=l(this).data("title"),e=l(".yith-wpv-shipping-method-form-container_"+i).html();l(this).WCBackboneModal({template:"wc-modal-edit-shipping-method",variable:{yith_wpd_parent_key:t,yith_wpd_shipping_key:i,yith_wpd_shipping_type:n,yith_wpd_shipping_title:o,yith_wpd_form_data:e}})}),l(document.body).on("click","ul.yith-wpdv-wc-shipping-zone-methods-list li .wc-shipping-zone-method-remove",function(e){"use strict";e.preventDefault();var t=l(this).closest(".yith-wpv-new-shipping-method-temp");0<t.length&&(0<(e=l(".yith-wpv-shipping-method-form-container_"+l(this).data("index"))).length&&e.remove(),0<(e=t.next(".wc-shipping-zone-method-hidden-data")).length&&e[0].remove(),t.remove())}),l(document).on("click",".yith-shipping-method-save-button",function(){l("#yith-save-shipping-settings-button").trigger("click");var e=l(document).find("table.wc-shipping-zones");e.find("tbody");e.block(m)}),l(document).on("click",".yith-wpdv-wc-shipping-zone-trigger-all",function(e){e.preventDefault();var t=l(this),e="#yith-wcmv-zone-data-"+t.data("index");"select-all"==t.data("action")?(l(e+" > option").attr("selected",!1),l("#yith-wcmv-shipping-select-all-regions").attr("selected","selected")):l(e+" > option").attr("selected",!1),l(e).trigger("change")}))}(jQuery);